# RAW格式筛选器

# 功能实现：

## 1.数据保留：确保操作可逆，保护用户数据安全

### “去除废片”：

一、新增“回收站”功能：去除的废片统一存放在”回收站“中，由用户决定是否删除

二、新增分类功能：分出“完整”，“单个” 两个文件夹，用于分类文件

“完整”：将去除废片后的文件，同时存在 RAW 和 jpg的文件放入“完整”文件夹，方便用户文件管理

“单个”：将可能存在的，用户漏选/错选的文件放入“单个”文件夹，用于用户文件复审

逻辑：

​	1.遍历目录下的所有文件，基于文件名（去掉后缀）归类。

​	2.如果一个文件名对应多个格式（如 `IMG_0001.CR3` 和 `IMG_0001.JPG`），则判定为完整文件，移动到“完整”文件夹。

​	3.如果文件名仅对应单个 JPG 文件（没有 RAW 文件对应），则归类到“单个”文件夹。

### "筛选精修"：

1.文件共存：允许存在除 RAW 和 jpg 格式外的其他文件

2.文件匹配(未改动)：文件中存在多种RAW格式文件也能正常筛选



## 2. 交互优化：增加用户选择 RAW 或 JPG 的弹窗

新增 `ask_format_choice()` 函数

作用：弹窗让用户选择是复制 **RAW** 还是 **JPG** 文件，提升用户体验。

逻辑：

1. 弹窗出现，用户可以点击“RAW”或“JPG”。
2. 根据用户的选择，程序筛选并复制相应格式的文件到目标文件夹。
3. 复制完成后弹出 `messagebox.showinfo()` 提示用户。



## 3. 界面优化

一、按钮布局优化

1.计算按钮 **水平居中的 x 坐标**，确保两个按钮 **间距一致**，让界面更美观。

2.动态计算按钮位置，使 UI 更加协调。

二、窗口弹出优化

​	选择 RAW / JPG 过滤时，**新增 `top.transient(root)` 和 `top.grab_set()`**，让弹窗置顶、模态化，避免误触主窗口。



## 4. 代码结构优化

一、减少重复代码

- `move_to_recycle_bin()`、`categorize_files()`、`ask_format_choice()` 让代码更模块化，提高可读性和可维护性。

- 变量命名优化：
  - `filename_counts` 逻辑清晰，旧代码可能会误解为计数器，新代码明确是存储文件路径的字典。
- 新增 `upper()` 统一后缀匹配：
  - 避免大小写混淆，例如 `.jpg` 和 `.JPG` 统一处理。
